<!DOCTYPE html>
<html>

<head>
    <title>{{ filename }} - Secure Viewer</title>
    <link rel="icon" type="image/png" href="{{ url_for('static', filename='favicon.png') }}">
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.1/css/all.min.css">
    {% if is_code %}
    <link rel="stylesheet"
        href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.9.0/styles/atom-one-dark.min.css">
    <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.9.0/highlight.min.js"></script>
    {% endif %}
    <style>
        body {
            user-select: none;
            -webkit-user-select: none;
        }

        .watermark {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            pointer-events: none;
            z-index: 1000;
            display: flex;
            flex-wrap: wrap;
            align-content: flex-start;
            overflow: hidden;
        }

        .watermark-text {
            font-size: 12px;
            color: rgba(255, 0, 0, 0.08);
            transform: rotate(-30deg);
            white-space: nowrap;
            padding: 40px;
            font-weight: bold;
        }

        .secure-badge {
            position: fixed;
            top: 70px;
            right: 10px;
            z-index: 1001;
        }

        pre {
            position: relative;
            z-index: 1;
        }
    </style>
</head>

<body class="min-h-screen bg-gray-900" oncontextmenu="return false;">
    <!-- Watermark Overlay -->
    <div class="watermark">
        {% for i in range(150) %}
        <span class="watermark-text">{{ watermark }}</span>
        {% endfor %}
    </div>

    <!-- Secure Badge -->
    <div class="secure-badge flex items-center gap-2 px-4 py-2 bg-red-600/90 rounded-lg text-white text-sm">
        <i class="fas fa-shield-halved"></i>
        <span>View Only - No Download</span>
    </div>

    <!-- Header -->
    <div class="bg-gray-800 py-4 px-6 flex items-center justify-between fixed top-0 left-0 right-0 z-50">
        <div class="flex items-center gap-3">
            <a href="/file-encryption" class="text-gray-400 hover:text-white">
                <i class="fas fa-arrow-left"></i>
            </a>
            <h1 class="text-white font-medium">{{ filename }}</h1>
            {% if is_code %}
            <span class="px-2 py-1 bg-teal-600 text-white text-xs rounded">{{ language }}</span>
            {% endif %}
        </div>
    </div>

    <!-- Content -->
    <div class="pt-20 pb-8 px-8">
        <div class="bg-gray-800 rounded-xl p-6 overflow-auto max-h-[80vh]">
            {% if is_code %}
            <pre><code class="language-{{ language }}">{{ content }}</code></pre>
            {% else %}
            <pre class="text-gray-300 whitespace-pre-wrap font-mono text-sm">{{ content }}</pre>
            {% endif %}
        </div>
    </div>

    {% if is_code %}
    <script>hljs.highlightAll();</script>
    {% endif %}

    <script>
        document.addEventListener('keydown', function (e) {
            if (e.ctrlKey && (e.key === 's' || e.key === 'S' || e.key === 'p' || e.key === 'P' || e.key === 'c' || e.key === 'C' || e.key === 'a' || e.key === 'A')) {
                e.preventDefault();
                return false;
            }
        });
    </script>
</body>

</html>